local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Menu de Modificações | drayko",
   LoadingTitle = "Carregando Scripts...",
   LoadingSubtitle = "by drayko",
   ConfigurationSaving = {
      Enabled = false
   }
})

-- ==========================================
-- VARIÁVEIS E CONFIGURAÇÕES
-- ==========================================
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Controle de Estados
local platAtiva = false
local modoVisivel = false
local shadersAtivos = false
local ultimaPlataforma = nil
local shaderConnection = nil

local pastaPlataformas = workspace:FindFirstChild("PlataformasInvisiveis") or Instance.new("Folder", workspace)
pastaPlataformas.Name = "PlataformasInvisiveis"

-- ==========================================
-- FUNÇÕES DE SHADERS (BY DRAYKO.EXE)
-- ==========================================
local function processObject(obj)
    if not shadersAtivos then return end
    if obj:IsA("BasePart") then
        obj.Material = Enum.Material.SmoothPlastic
        if obj.Transparency == 0 then
            obj.Reflectance = 0.6
        end
    end
end

local function applyLighting()
    if not shadersAtivos then return end
    Lighting.Technology = Enum.Technology.Future
    Lighting.Brightness = 2.2
    Lighting.GlobalShadows = true
    Lighting.OutdoorAmbient = Color3.fromRGB(170, 130, 255)
    
    if not Lighting:FindFirstChild("DraykoSky") then
        local sky = Instance.new("Sky")
        sky.Name = "DraykoSky"
        sky.SkyboxUp = "rbxassetid://16573649975"
        sky.SunAngularSize = 0
        sky.Parent = Lighting
    end
end

-- ==========================================
-- ABA SCRIPTS (EMOTES, PLATAFORMAS, SHADERS)
-- ==========================================
local Tab = Window:CreateTab("Scripts", 4483362458)

Tab:CreateSection("Visual")

Tab:CreateToggle({
   Name = "Shaders by drayko.exe",
   CurrentValue = false,
   Flag = "ShaderToggle",
   Callback = function(Value)
      shadersAtivos = Value
      if Value then
         applyLighting()
         for _, obj in pairs(Workspace:GetDescendants()) do processObject(obj) end
         shaderConnection = Workspace.DescendantAdded:Connect(processObject)
         Rayfield:Notify({Title = "Shaders", Content = "Efeitos aplicados por drayko.exe!", Duration = 3})
      else
         if shaderConnection then shaderConnection:Disconnect() end
         Lighting.Brightness = 1 
         if Lighting:FindFirstChild("DraykoSky") then Lighting.DraykoSky:Destroy() end
         Rayfield:Notify({Title = "Shaders", Content = "Shaders desativados.", Duration = 3})
      end
   end,
})

Tab:CreateSection("Emotes")

Tab:CreateToggle({
   Name = "Renomear Emotes",
   CurrentValue = false,
   Flag = "EmoteToggle",
   Callback = function(Value)
      local Emotes = game:GetService("ReplicatedStorage"):WaitForChild("Items"):WaitForChild("Emotes")
      if Value then
         if Emotes:FindFirstChild("WerewolfHowl") then Emotes.WerewolfHowl.Name = "GoofyStride" end
         if Emotes:FindFirstChild("Griddy") then Emotes.Griddy.Name = "BumperKart" end
         if Emotes:FindFirstChild("SkateboardStroll") then Emotes.SkateboardStroll.Name = "Nostalgia" end
      else
         if Emotes:FindFirstChild("GoofyStride") then Emotes.GoofyStride.Name = "WerewolfHowl" end
         if Emotes:FindFirstChild("BumperKart") then Emotes.BumperKart.Name = "Griddy" end
         if Emotes:FindFirstChild("Nostalgia") then Emotes.Nostalgia.Name = "SkateboardStroll" end
      end
   end,
})

Tab:CreateSection("Plataformas")

Tab:CreateToggle({
   Name = "Habilitar Teclas (E, Y, U)",
   CurrentValue = false,
   Flag = "PlatToggle",
   Callback = function(Value)
      platAtiva = Value
      if not Value then pastaPlataformas:ClearAllChildren() end
   end,
})

-- ==========================================
-- ABA SOCIAL
-- ==========================================
local SocialTab = Window:CreateTab("Social", 4483362458)

SocialTab:CreateSection("Links")

SocialTab:CreateButton({
   Name = "Copiar Discord",
   Callback = function()
      setclipboard("https://discord.gg/bqgVRCWm")
      Rayfield:Notify({Title = "Sucesso", Content = "Convite copiado!", Duration = 3})
   end,
})

SocialTab:CreateButton({
   Name = "TikTok (@drayko.exe)",
   Callback = function()
      setclipboard("https://www.tiktok.com/@drayko.exe")
      Rayfield:Notify({Title = "Sucesso", Content = "Link do TikTok copiado!", Duration = 3})
   end,
})

-- ==========================================
-- LÓGICA DE INPUT
-- ==========================================
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed or not platAtiva then return end

    if input.KeyCode == Enum.KeyCode.E then
        if #pastaPlataformas:GetChildren() > 0 then
            pastaPlataformas:ClearAllChildren()
        else
            local character = player.Character
            if character then
                local root = character:WaitForChild("HumanoidRootPart")
                for x = -500, 500, 16 do -- Aumentei o espaçamento para evitar lag em mapas grandes
                    for z = -500, 500, 16 do
                        local p = Instance.new("Part")
                        p.Size = Vector3.new(16, 1, 16)
                        p.Position = Vector3.new(x, root.Position.Y - 3, z)
                        p.Anchored, p.CanCollide = true, true
                        p.Transparency = modoVisivel and 0.3 or 1
                        p.Material = modoVisivel and Enum.Material.Neon or Enum.Material.Plastic
                        p.Parent = pastaPlataformas
                        ultimaPlataforma = p
                    end
                end
            end
        end
    end

    if input.KeyCode == Enum.KeyCode.Y then
        modoVisivel = not modoVisivel
        for _, p in pairs(pastaPlataformas:GetChildren()) do
            p.Transparency = modoVisivel and 0.3 or 1
            p.Material = modoVisivel and Enum.Material.Neon or Enum.Material.Plastic
        end
    end

    if input.KeyCode == Enum.KeyCode.U and ultimaPlataforma then
        if player.Character then
            player.Character.HumanoidRootPart.CFrame = ultimaPlataforma.CFrame + Vector3.new(0, 3, 0)
        end
    end
end)

Rayfield:LoadConfiguration()
